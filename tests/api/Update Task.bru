meta {
  name: Update Task
  type: http
  seq: 6
}

put {
  url: {{baseUrl}}{{apiPrefix}}/tasks/{{taskId}}
  body: json
  auth: none
}

body:json {
  {
    "completed": true,
    "text": "Buy groceries - Updated"
  }
}

assert {
  res.status: eq 200
  res.body.data.completed: eq true
}

tests {
  test("should return 200 OK", function() {
    expect(res.getStatus()).to.equal(200);
  });

  test("should update the task", function() {
    const task = res.getBody().data;
    expect(task.completed).to.equal(true);
    expect(task.text).to.equal("Buy groceries - Updated");
  });

  test("should update updatedAt timestamp", function() {
    const task = res.getBody().data;
    expect(new Date(task.updatedAt).getTime()).to.be.greaterThan(new Date(task.createdAt).getTime());
  });
}
